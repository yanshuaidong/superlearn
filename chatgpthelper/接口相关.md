正常预检接口：
https://chatgpt.com/backend-api/f/conversation/prepare

{"action":"next","fork_from_shared_post":false,"parent_message_id":"client-created-root","model":"gpt-5-2-thinking","timezone_offset_min":-480,"timezone":"Asia/Shanghai","conversation_mode":{"kind":"primary_assistant"},"system_hints":[],"partial_query":{"id":"6d650933-80f9-4ed9-ad8e-f56b344a3982","author":{"role":"user"},"content":{"content_type":"text","parts":["你知道https://chatgpt.com/backend-api/f/conversation接口是干什么的吗？"]}},"supports_buffering":true,"supported_encodings":["v1"],"client_contextual_info":{"app_name":"chatgpt.com"},"thinking_effort":"standard"}

正常请求接口：
https://chatgpt.com/backend-api/f/conversation

{"action":"next","messages":[{"id":"f8a3daec-8cdc-47e0-ab59-a67db612b603","author":{"role":"user"},"create_time":1766555783.278,"content":{"content_type":"text","parts":["你知道https://chatgpt.com/backend-api/f/conversation接口是干什么的吗？"]},"metadata":{"developer_mode_connector_ids":[],"selected_sources":[],"selected_github_repos":[],"selected_all_github_repos":false,"serialization_metadata":{"custom_symbol_offsets":[]}}}],"parent_message_id":"client-created-root","model":"gpt-5-2-thinking","timezone_offset_min":-480,"timezone":"Asia/Shanghai","conversation_mode":{"kind":"primary_assistant"},"enable_message_followups":true,"system_hints":[],"supports_buffering":true,"supported_encodings":["v1"],"client_contextual_info":{"is_dark_mode":false,"time_since_loaded":854,"page_height":532,"page_width":1435,"pixel_ratio":2,"screen_height":1440,"screen_width":2560,"app_name":"chatgpt.com"},"paragen_cot_summary_display_override":"allow","force_parallel_switch":"auto","thinking_effort":"standard"}



自动化的预接口：
https://chatgpt.com/backend-api/f/conversation/prepare

{"action":"next","fork_from_shared_post":false,"parent_message_id":"client-created-root","model":"gpt-5-2-thinking","timezone_offset_min":-480,"timezone":"Asia/Shanghai","conversation_mode":{"kind":"primary_assistant"},"system_hints":[],"supports_buffering":true,"supported_encodings":["v1"],"client_contextual_info":{"app_name":"chatgpt.com"},"thinking_effort":"standard"}


自动化的后端接口：（浏览器会显示已取消）
https://chatgpt.com/backend-api/f/conversation
{"action":"next","messages":[{"id":"a8a26981-e3ad-460e-887d-339838324a8a","author":{"role":"user"},"create_time":1766555886.524,"content":{"content_type":"text","parts":["请用100字左右介绍一下Python语言的特点和应用场景。请用100字左右介绍一下Python语言的特点和应用场景。请用100字左右介绍一下Python语言的特点和应用场景。"]},"metadata":{"developer_mode_connector_ids":[],"selected_sources":[],"selected_github_repos":[],"selected_all_github_repos":false,"serialization_metadata":{"custom_symbol_offsets":[]}}}],"parent_message_id":"client-created-root","model":"gpt-5-2-thinking","timezone_offset_min":-480,"timezone":"Asia/Shanghai","conversation_mode":{"kind":"primary_assistant"},"enable_message_followups":true,"system_hints":[],"supports_buffering":true,"supported_encodings":["v1"],"client_contextual_info":{"is_dark_mode":false,"time_since_loaded":957,"page_height":532,"page_width":1435,"pixel_ratio":2,"screen_height":1440,"screen_width":2560,"app_name":"chatgpt.com"},"paragen_cot_summary_display_override":"allow","force_parallel_switch":"auto","thinking_effort":"standard"}




输入文字的位置。
<div class="-my-2.5 flex min-h-14 items-center overflow-x-hidden px-1.5 [grid-area:primary] group-data-expanded/composer:mb-0 group-data-expanded/composer:px-2.5"><div class="wcDTda_prosemirror-parent text-token-text-primary max-h-[max(30svh,5rem)] max-h-52 min-h-[var(--deep-research-composer-extra-height,unset)] flex-1 overflow-auto [scrollbar-width:thin] default-browser vertical-scroll-fade-mask"><textarea class="wcDTda_fallbackTextarea" name="prompt-textarea" placeholder="询问任何问题" data-virtualkeyboard="true" style="display: none;"></textarea><script nonce="">window.__oai_logHTML?window.__oai_logHTML():window.__oai_SSR_HTML=window.__oai_SSR_HTML||Date.now();requestAnimationFrame((function(){window.__oai_logTTI?window.__oai_logTTI():window.__oai_SSR_TTI=window.__oai_SSR_TTI||Date.now()}))</script><div contenteditable="true" translate="no" class="ProseMirror" id="prompt-textarea" data-virtualkeyboard="true"><p>你好</p></div></div></div>



经过下面改进后：
修改了 inputQuestion 函数，按优先级尝试三种更可靠的输入方式：
模拟粘贴操作（首选）- 使用 ClipboardEvent 和 DataTransfer，最接近真实用户行为
分批输入（备选）- 每次输入 50 个字符，触发完整的事件链（beforeinput → execCommand → input）
直接 DOM 操作（最后备用）
关键改进
添加了 beforeinput 事件触发（ProseMirror 依赖这个事件）
使用 insertFromPaste 类型的事件，更接近真实粘贴行为
增加输入后等待时间从 3 秒到 5 秒，确保预检请求完成
每种方法后都有验证步骤，确保内容确实被输入

https://chatgpt.com/backend-api/f/conversation/prepare

{"action":"next","fork_from_shared_post":false,"parent_message_id":"client-created-root","model":"gpt-5-2-thinking","timezone_offset_min":-480,"timezone":"Asia/Shanghai","conversation_mode":{"kind":"primary_assistant"},"system_hints":[],"partial_query":{"id":"de6b65ed-9bba-4179-9135-2e3a58319b4f","author":{"role":"user"},"content":{"content_type":"text","parts":["请用100字左右介绍一下Python语言的特点和应用场景。请用100字左右介绍一下Python语言的特点和应用场景。"]}},"supports_buffering":true,"supported_encodings":["v1"],"client_contextual_info":{"app_name":"chatgpt.com"},"thinking_effort":"standard"}


https://chatgpt.com/backend-api/f/conversation

{"action":"next","messages":[{"id":"dd2e8b55-e049-4225-a771-fdc9213c8f1b","author":{"role":"user"},"create_time":1766556467.905,"content":{"content_type":"text","parts":["请用100字左右介绍一下Python语言的特点和应用场景。请用100字左右介绍一下Python语言的特点和应用场景。"]},"metadata":{"developer_mode_connector_ids":[],"selected_sources":[],"selected_github_repos":[],"selected_all_github_repos":false,"serialization_metadata":{"custom_symbol_offsets":[]}}}],"parent_message_id":"client-created-root","model":"gpt-5-2-thinking","timezone_offset_min":-480,"timezone":"Asia/Shanghai","conversation_mode":{"kind":"primary_assistant"},"enable_message_followups":true,"system_hints":[],"supports_buffering":true,"supported_encodings":["v1"],"client_contextual_info":{"is_dark_mode":false,"time_since_loaded":37,"page_height":660,"page_width":1435,"pixel_ratio":2,"screen_height":1440,"screen_width":2560,"app_name":"chatgpt.com"},"paragen_cot_summary_display_override":"allow","force_parallel_switch":"auto","thinking_effort":"standard"}