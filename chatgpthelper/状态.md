





初始状态：
<div><span class="" data-state="closed"><div><div class="relative"><button type="button" aria-label="启动语音模式" class="composer-submit-button-color text-submit-btn-text flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:opacity-70 focus-visible:outline-black focus-visible:outline-none disabled:text-[#f4f4f4] disabled:opacity-30 dark:focus-visible:outline-white" style="view-transition-name: var(--vt-composer-speech-button);"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" aria-hidden="true" class="h-5 w-5"><use href="/cdn/assets/sprites-core-i9agxugi.svg#f8aa74" fill="currentColor"></use></svg></button></div></div></span></div>

有输入了，可以发送。
<button id="composer-submit-button" aria-label="发送提示" data-testid="send-button" class="composer-submit-btn composer-submit-button-color h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" aria-hidden="true" class="icon"><use href="/cdn/assets/sprites-core-i9agxugi.svg#01bab7" fill="currentColor"></use></svg></button>

表示正在生成：
<button id="composer-submit-button" aria-label="停止流式传输" data-testid="stop-button" class="composer-submit-btn composer-secondary-button-color h-9 w-9"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" aria-hidden="true" class="icon"><use href="/cdn/assets/sprites-core-i9agxugi.svg#bbf3a9" fill="currentColor"></use></svg></button>

按钮不在是正在生成后可以进入下一步：


1查找有没有复制按钮和复制按钮有没有“显示”出来，当前元素和一些父元素要一起检查，有可能是父元素隐藏了。
2看有没有ai回复的内容。这里仅仅查有没有dom就可以了。
等待30秒，每5秒查询一次。两个都成功才是真的成功否则就是失败。

ai回答的内容
<div data-message-author-role="assistant" data-message-id="c7c10aff-ddc5-4eeb-ad78-c9e4798f16ec" dir="auto" class="min-h-8 text-message relative flex w-full flex-col items-end gap-2 text-start break-words whitespace-normal [.text-message+&amp;]:mt-1" data-message-model-slug="gpt-5-2-thinking"></div>


复制按钮。
<button class="text-token-text-secondary hover:bg-token-bg-secondary rounded-lg" aria-label="复制" aria-pressed="false" data-testid="copy-turn-action-button" data-state="closed"><span class="flex items-center justify-center touch:w-10 h-8 w-8"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" aria-hidden="true" class="icon"><use href="/cdn/assets/sprites-core-i9agxugi.svg#ce3544" fill="currentColor"></use></svg></span></button>